<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>SharePoint Mindmap – St. Josef</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Markmap Styles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-lib@0.15.4/dist/style.min.css">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    #app {
      width: 100%;
      height: 100vh;
    }
    #loading {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 6px 10px;
      background: rgba(0,0,0,0.7);
      color: white;
      font-size: 12px;
      border-radius: 4px;
      z-index: 10;
    }
    #error {
      position: absolute;
      top: 40px;
      left: 10px;
      padding: 6px 10px;
      background: rgba(180,0,0,0.8);
      color: white;
      font-size: 12px;
      border-radius: 4px;
      z-index: 10;
      display: none;
      max-width: 90vw;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <div id="loading">Lade Mindmap …</div>
  <div id="error"></div>
  <svg id="app"></svg>

  <!-- Markmap Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.15.4/dist/markmap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.15.4/dist/transform.min.js"></script>

  <script>
    // HIER die RAW-URL deiner mindmap.md eintragen:
    const RAW_URL = 'https://raw.githubusercontent.com/master2go/sharepoint/refs/heads/main/mindmap.md';

    const loadingEl = document.getElementById('loading');
    const errorEl = document.getElementById('error');
    const svg = document.getElementById('app');

    async function loadMindmap() {
      try {
        const res = await fetch(RAW_URL);
        if (!res.ok) {
          throw new Error('HTTP ' + res.status + ' ' + res.statusText);
        }
        const markdown = await res.text();

        const { transform } = window.markmap;
        const { Markmap } = window.markmap;

        const { root } = transform(markdown);
        const mm = Markmap.create(svg, null, root);

        loadingEl.style.display = 'none';
      } catch (err) {
        console.error(err);
        loadingEl.style.display = 'none';
        errorEl.style.display = 'block';
        errorEl.textContent =
          'Fehler beim Laden der Mindmap:\\n' +
          (err && err.message ? err.message : String(err)) +
          '\\n\\nStimmt die RAW_URL in index.html?';
      }
    }

    loadMindmap();
  </script>
</body>
</html>
